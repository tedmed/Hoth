@page "/"

<PageTitle>Home</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-5">

    <!-- Hlavní nadpis -->
    <MudText Typo="Typo.h3" Align="Align.Center" Color="Color.Primary" GutterBottom="true">
        🌦️ WeatherEye – systém výstrah
    </MudText>
    <MudText Typo="Typo.subtitle1" Align="Align.Center" Class="mb-4">
        Informační systém pro sledování nebezpečného počasí. Sledujte aktuální varování a nastavte si upozornění pro vámi vybraný region.
    </MudText>

    <!-- Call-to-action tlačítko -->
    <Microsoft.AspNetCore.Components.Authorization.AuthorizeView>
        <NotAuthorized>
            <MudStack Row="true" Justify="Justify.Center" Class="mb-5">
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/register">
                    Registrace
                </MudButton>
            </MudStack>
        </NotAuthorized>
    </Microsoft.AspNetCore.Components.Authorization.AuthorizeView>

    <!-- Sekce s kartami -->
    <MudStack Row="true" Spacing="3" Class="mb-5" Justify="Justify.Center">
        <MudCard Class="mx-2" Elevation="3">
            <MudCardHeader>
                <MudText Typo="Typo.h6">Notifikace</MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudText Typo="Typo.body2">
                    Upozornění je možné individuálně nastavit podle regionu, typu výstrahy a závažnosti.
                    Upozornění si můžete nechat zasílat emailem nebo si stáhnout naši mobilní aplikaci.
                </MudText>
            </MudCardContent>
        </MudCard>

        <MudCard Class="mx-2" Elevation="3">
            <MudCardHeader>
                <MudText Typo="Typo.h6">Přehled výstrah</MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudText Typo="Typo.body2">
                    Aktuální i historické výstrahy podle typu nebezpečí, regionu, závažnosti a dalších parametrů.
                </MudText>
            </MudCardContent>
        </MudCard>
    </MudStack>

    <!-- Tabulka s varováními -->
    <MudText Typo="Typo.h5" GutterBottom="true">Aktuální varování</MudText>

    <MudTable Items="Warnings" Dense="true" Hover="true" Striped="true" Bordered="true">
        <HeaderContent>
            <MudTh>Datum</MudTh>
            <MudTh>Region</MudTh>
            <MudTh>Nebezpečí</MudTh>
            <MudTh>Závažnost</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>@context.Date.ToString("dd.MM.yyyy")</MudTd>
            <MudTd>@context.Region</MudTd>
            <MudTd>@context.Event</MudTd>
            <MudTd>
                @if (context.Severity == "High")
                {
                    <MudChip T="string" Color="Color.Error" Variant="Variant.Filled">Vysoká</MudChip>
                }
                else if (context.Severity == "Moderate")
                {
                    <MudChip T="string" Color="Color.Warning" Variant="Variant.Filled">Střední</MudChip>
                }
                else
                {
                    <MudChip T="string" Color="Color.Info" Variant="Variant.Filled">Nízká</MudChip>
                }
            </MudTd>
        </RowTemplate>
    </MudTable>

</MudContainer>
@code {
    // Model jedné výstrahy
    public class Warning
    {
        public DateTime Date { get; set; }
        public string Region { get; set; }
        public string Event { get; set; }
        public string Severity { get; set; }
    }

    // Kolekce výstrah
    private List<Warning> Warnings = new()
    {
        new Warning { Date = DateTime.Now, Region = "Pardubický kraj", Event = "Silný vítr", Severity = "Moderate" },
        new Warning { Date = DateTime.Now.AddDays(-1), Region = "Středočeský kraj", Event = "Námraza", Severity = "High" },
        new Warning { Date = DateTime.Now.AddDays(-2), Region = "Jihočeský kraj", Event = "Silný déšť", Severity = "Moderate" },
        new Warning { Date = DateTime.Now.AddDays(-4), Region = "Moravský kraj", Event = "Silná ledovka", Severity = "" },
        new Warning { Date = DateTime.Now.AddDays(-7), Region = "Královéhradecký kraj", Event = "Bláto", Severity = "Moderate" }

    };
}